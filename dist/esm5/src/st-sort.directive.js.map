{"version":3,"file":"st-sort.directive.js","sourceRoot":"","sources":["../../src/st-sort.directive.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAC,SAAS,EAAE,KAAK,EAAE,WAAW,EAAE,YAAY,EAAqB,UAAU,EAAC,MAAM,eAAe,CAAC;AACzG,OAAO,EAAC,UAAU,EAAC,MAAM,uBAAuB,CAAC;AACjD,OAAO,EAAC,aAAa,IAAI,IAAI,EAAmC,MAAM,kBAAkB,CAAC;;;;;IAYrF,yBAAoB,KAAoB,EAAU,GAAe;QAA7C,UAAK,GAAL,KAAK,CAAe;QAAU,QAAG,GAAH,GAAG,CAAY;;qBAGhC,CAAC;qBAIc,KAAK;KANpD;0BAQqC,kCAAK;;;;;YACvC,MAAM,CAAC,IAAI,CAAC,oBAAoB,oBAAsB,CAAC;;;;;0BAGpB,mCAAM;;;;;YACzC,MAAM,CAAC,IAAI,CAAC,oBAAoB,sBAAuB,CAAC;;;;;;;;IAGrC,gCAAM;;;;QACzB,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;;;;;IAG7B,kCAAQ;;;IAAR;QAAA,iBAUC;QATG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACnB,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,KAAK,IAAI,IAAI,IAAI,CAAC,KAAK,KAAK,MAAM;YAC7F,YAAY,EAAE,IAAI,CAAC,KAAK;SAC3B,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,UAAC,EAAuC;gBAAtC,wBAAS,EAAE,oBAAO;YAC7C,KAAI,CAAC,oBAAoB,GAAG,OAAO,KAAK,KAAI,CAAC,OAAO,CAAC,CAAC,mBAAgB,SAAS,EAAC,CAAC,kBAAmB,CAAC;SACxG,CAAC,CAAC;QACH,qBAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;QAC1C,IAAI,CAAC,oBAAoB,GAAG,SAAS,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,mBAAqB,CAAC,CAAC,CAAC,kBAAmB,CAAC;KACpI;;;;IAED,qCAAW;;;IAAX;QACI,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;KACzB;;gBA5CJ,SAAS,SAAC;oBACP,QAAQ,EAAE,UAAU;oBACpB,QAAQ,EAAE,QAAQ;iBACrB;;;;gBAPO,UAAU;gBADsD,UAAU;;;0BAiB7E,KAAK,SAAC,gBAAgB;4BAEtB,KAAK,SAAC,QAAQ;0BAEd,KAAK,SAAC,aAAa;0BAEnB,WAAW,SAAC,mBAAmB;2BAI/B,WAAW,SAAC,oBAAoB;2BAIhC,YAAY,SAAC,OAAO;;0BA/BzB;;SASa,eAAe","sourcesContent":["import {Directive, Input, HostBinding, HostListener, OnInit, OnDestroy, ElementRef} from '@angular/core';\nimport {SmartTable} from './smart-table.service';\nimport {sortDirective as sort, SortDirection, SortConfiguration} from 'smart-table-core';\n\n\n@Directive({\n    selector: '[stSort]',\n    exportAs: 'stSort'\n})\nexport class StSortDirective<T> implements OnInit, OnDestroy {\n    private _directive: any;\n\n    currentSortDirection: SortDirection = SortDirection.NONE;\n\n    constructor(private table: SmartTable<T>, private _el: ElementRef) {\n    }\n\n    @Input('stDebounceTime') delay = 0;\n\n    @Input('stSort') pointer: string;\n\n    @Input('stSortCycle') cycle: boolean | string = false;\n\n    @HostBinding('class.st-sort-asc') get isAsc() {\n        return this.currentSortDirection === SortDirection.ASC;\n    }\n\n    @HostBinding('class.st-sort-desc') get isDesc() {\n        return this.currentSortDirection === SortDirection.DESC;\n    }\n\n    @HostListener('click') toggle(): void {\n        this._directive.toggle();\n    }\n\n    ngOnInit() {\n        this._directive = sort({\n            table: this.table, pointer: this.pointer, cycle: this.cycle === true || this.cycle === 'true',\n            debounceTime: this.delay\n        });\n        this._directive.onSortToggle(({direction, pointer}: SortConfiguration) => {\n            this.currentSortDirection = pointer === this.pointer ? <SortDirection>direction : SortDirection.NONE;\n        });\n        const initState = this._directive.state();\n        this.currentSortDirection = initState.pointer === this.pointer ? (initState.direction || SortDirection.ASC) : SortDirection.NONE;\n    }\n\n    ngOnDestroy() {\n        this._directive.off();\n    }\n}\n"]}