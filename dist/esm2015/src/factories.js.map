{"version":3,"file":"factories.js","sourceRoot":"","sources":["../package/src/factories.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAC,UAAU,EAAC,MAAM,eAAe,CAAC;AAEzC,OAAO,EACH,UAAU,IAAI,OAAO,EAIxB,MAAM,kBAAkB,CAAC;AAE1B,OAAO,EAAkB,EAAE,IAAI,YAAY,EAAE,IAAI,IAAI,cAAc,EAAC,MAAM,YAAY,CAAC;AAEvF,MAAM,CAAC,uBAAM,IAAI,GAAG,CAAI,IAA0B,EAC1B,UAAU,GAAG,IAAI,UAAU,EAAE,EAC7B,GAAG,UAAoC,EAAiB,EAAE;IAC9E,uBAAM,SAAS,GAAQ,EAAE,CAAC;IAC1B,uBAAM,KAAK,GAAmB,OAAO,CAAC,EAAC,IAAI,EAAE,SAAS,EAAE,UAAU,EAAC,EAAE,GAAG,UAAU,CAAC,CAAC;IACpF,qBAAI,MAAM,GAAG,cAAc,CAAC,IAAI,CAAC,CAAC;IAClC,qBAAI,YAA0B,CAAC;IAE/B,MAAM,mBAAgB,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE;;;;QACvC,IAAI;YACA,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACf,YAAY,CAAC,WAAW,EAAE,CAAC;aAC9B;YACD,KAAK,CAAC,QAAQ,oCAAwB,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;YACvD,YAAY,GAAG,MAAM;iBAChB,SAAS,CAAC,CAAC,KAAU,EAAE,EAAE;gBACtB,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,SAAS,CAAC,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC;gBAChD,KAAK,CAAC,IAAI,EAAE,CAAC;aAChB,CAAC,CAAC;SACV;;;;;;QACD,GAAG,CAAC,OAAY,EAAE,aAA0B;YACxC,YAAY,CAAC,WAAW,EAAE,CAAC;YAC3B,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;aAC5C;YACD,MAAM,GAAG,YAAY,CAAC,OAAO,CAAC,CAAC;YAC/B,KAAK,CAAC,QAAQ,oCAAwB,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;YACvD,YAAY,GAAG,MAAM;iBAChB,SAAS,CAAC,CAAC,MAAW,EAAE,EAAE;gBACvB,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,SAAS,CAAC,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC;gBACjD,KAAK,CAAC,IAAI,EAAE,CAAC;aAChB,CAAC,CAAC;SACV;;;;QACD,WAAW;YACP,YAAY,CAAC,WAAW,EAAE,CAAC;SAC9B;KACJ,CAAC,EAAC;CACN,CAAC;AAEF,MAAM,CAAC,uBAAM,EAAE,GAAG,CAAI,IAAS,EAAE,UAAU,GAAG,IAAI,UAAU,EAAE,EAAE,GAAG,UAAoC,EAAiB,EAAE,CACtH,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,UAAU,EAAE,GAAG,UAAU,CAAC,CAAC","sourcesContent":["import {TableState} from './table-state';\nimport {SmartTable} from './smart-table.service';\nimport {\n    smartTable as stTable,\n    SmartTableEvents as StEvents,\n    SmartTableExtension,\n    SmartTable as ISmartTable\n} from 'smart-table-core';\nimport {Subscription} from 'rxjs/internal/Subscription';\nimport {ObservableInput, of as observableOf, from as observableFrom} from 'rxjs/index';\n\nexport const from = <T>(data: ObservableInput<T[]>,\n                        tableState = new TableState(),\n                        ...extensions: SmartTableExtension<T>[]): SmartTable<T> => {\n    const dataArray: T[] = [];\n    const table: ISmartTable<T> = stTable({data: dataArray, tableState}, ...extensions);\n    let source = observableFrom(data);\n    let subscription: Subscription;\n\n    return <SmartTable<T>>Object.assign(table, {\n        init() {\n            if (subscription) {\n                subscription.unsubscribe();\n            }\n            table.dispatch(StEvents.EXEC_CHANGED, {working: true});\n            subscription = source\n                .subscribe((items: T[]) => {\n                    dataArray.splice(0, dataArray.length, ...items);\n                    table.exec();\n                });\n        },\n        use(newData: T[], newTableState?: TableState) {\n            subscription.unsubscribe();\n            if (newTableState) {\n                Object.assign(tableState, newTableState);\n            }\n            source = observableOf(newData);\n            table.dispatch(StEvents.EXEC_CHANGED, {working: true});\n            subscription = source\n                .subscribe((values: T[]) => {\n                    dataArray.splice(0, dataArray.length, ...values);\n                    table.exec();\n                });\n        },\n        ngOnDestroy() {\n            subscription.unsubscribe();\n        }\n    });\n};\n\nexport const of = <T>(data: T[], tableState = new TableState(), ...extensions: SmartTableExtension<T>[]): SmartTable<T> =>\n    from(observableOf(data), tableState, ...extensions);\n"]}